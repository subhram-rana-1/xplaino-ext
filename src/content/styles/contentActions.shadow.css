/* src/content/styles/contentActions.shadow.css */
/* Shadow DOM compatible styles for Content Actions component */
/* 
 * Color Variables: These are injected from src/constants/colors.css.ts
 * NEVER use hardcoded hex or rgba values - always use CSS variables
 * ALL properties use !important for Shadow DOM style isolation
 */

:host {
  all: initial !important;
  font-family: var(--font-family-primary) !important;
}

* {
  box-sizing: border-box !important;
}

/* Color variable fallbacks */
:host {
  --color-primary: #9527F5 !important;
  --color-primary-light: #BF7EFA !important;
  --color-primary-very-light: #eaddf8 !important;
  --color-primary-dark: #8607f5 !important;
  --color-white: #FFFFFF !important;
  --color-secondary-medium: #34D399 !important;
  --color-secondary-light: #D1FAE5 !important;
}

/* Main container */
.contentActionsContainer {
  display: flex !important;
  align-items: center !important;
  pointer-events: auto !important;
}

/* Xplaino Icon Button */
.xplainoIconButton {
  width: 22px !important;
  height: 22px !important;
  border-radius: 50% !important;
  background: var(--color-white) !important;
  border: none !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
  padding: 0 !important;
  outline: none !important;
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  transform: translateX(-50%) scale(0) !important;
  opacity: 0 !important;
}

.xplainoIconButton.visible {
  opacity: 1 !important;
  visibility: visible !important;
  transform: translateX(-50%) scale(1) !important;
  animation: iconButtonEmerge 0.25s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;
}

.xplainoIconButton.hidden {
  opacity: 0 !important;
  visibility: hidden !important;
  transform: translateX(-50%) scale(0) !important;
  pointer-events: none !important;
  animation: iconButtonShrink 0.25s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;
}

.xplainoIcon {
  width: 20px !important;
  height: 20px !important;
  object-fit: contain !important;
  display: block !important;
  pointer-events: none !important;
  margin: auto !important;
  flex-shrink: 0 !important;
}

/* Button Group - Pill shaped */
.contentActionsButtonGroup {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  gap: 2px !important;
  background: var(--color-white) !important;
  border-radius: 999px !important;
  padding: 5px !important;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.3) !important;
  opacity: 0 !important;
  visibility: hidden !important;
  transform: translateX(-12px) !important;
  width: var(--button-group-width, 0px) !important;
  max-width: 500px !important;
  overflow: visible !important;
  transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  transform-origin: left center !important;
  white-space: nowrap !important;
}

.contentActionsButtonGroup.visible {
  opacity: 1 !important;
  visibility: visible !important;
  transform: translateX(-12px) !important;
  /* Width will be set via CSS variable by JavaScript */
  max-width: 500px !important;
  overflow: visible !important;
  will-change: width !important;
  transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* Action Button Wrapper (for tooltip positioning) */
.contentActionButtonWrapper {
  position: relative !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Individual Action Button - Compact with circular shape for pill effect */
.contentActionButton {
  width: 27px !important;
  height: 27px !important;
  border-radius: 50% !important;
  background: transparent !important;
  border: none !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: none !important; /* Remove transition to avoid conflicts with animation */
  padding: 0 !important;
  outline: none !important;
  opacity: 0 !important;
  transform: scale(0) !important; /* Start at 0px dimension */
  pointer-events: none !important;
  visibility: hidden !important;
}

.contentActionsButtonGroup.visible .contentActionButton {
  pointer-events: auto !important;
  visibility: visible !important;
  display: flex !important;
  min-width: 26px !important;
  min-height: 26px !important;
  /* Remove opacity and transform - let animation handle it */
  /* Animation will be applied via inline styles in JavaScript */
}

.contentActionButton:hover {
  background: var(--color-primary-very-light) !important;
}

.contentActionButton:active {
  transform: scale(0.92) !important;
}

/* Action Button Icons */
.contentActionButton svg {
  width: 27px !important;
  height: 27px !important;
  color: var(--color-primary-light) !important;
  stroke: var(--color-primary-light) !important;
  stroke-width: 2.5 !important;
  fill: none !important;
  pointer-events: none !important;
  display: block !important;
  visibility: visible !important;
  opacity: 0 !important;
  flex-shrink: 0 !important;
  transform: scale(0) !important; /* Start at 0px dimension */
}

.contentActionsButtonGroup.visible .contentActionButton svg {
  visibility: visible !important;
  display: block !important;
  /* Remove opacity and transform - let animation handle it */
  /* Animation will be applied via inline styles in JavaScript */
}

.contentActionButton:hover svg {
  color: var(--color-primary) !important;
  stroke: var(--color-primary) !important;
}

/* Tooltip */
.contentActionTooltip {
  position: absolute !important;
  bottom: calc(100% + 8px) !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  background: var(--color-primary-very-light) !important;
  color: var(--color-primary-light) !important;
  padding: 4px 12px !important;
  border-radius: 999px !important;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
  font-size: 12px !important;
  font-weight: 500 !important;
  white-space: nowrap !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
  pointer-events: none !important;
  animation: tooltipFadeIn 0.15s ease forwards !important;
  z-index: 10 !important;
}

.contentActionTooltip::after {
  content: '' !important;
  position: absolute !important;
  top: 100% !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  border: 5px solid transparent !important;
  border-top-color: var(--color-primary-very-light) !important;
}

/* Animations */
@keyframes buttonScaleIn {
  from {
    opacity: 0 !important;
    transform: scale(0) !important; /* Start at 0px dimension */
  }
  to {
    opacity: 1 !important;
    transform: scale(1) !important; /* Grow to final radius size (26px) */
  }
}

@keyframes iconScaleIn {
  from {
    opacity: 0 !important;
    transform: scale(0) !important; /* Start at 0px dimension */
  }
  to {
    opacity: 1 !important;
    transform: scale(1) !important; /* Grow to full size */
  }
}

@keyframes tooltipFadeIn {
  from {
    opacity: 0 !important;
    transform: translateX(-50%) translateY(4px) !important;
  }
  to {
    opacity: 1 !important;
    transform: translateX(-50%) translateY(0) !important;
  }
}

/* Icon button emerge animation */
@keyframes iconButtonEmerge {
  from {
    opacity: 0 !important;
    transform: translateX(-50%) scale(0) !important;
  }
  to {
    opacity: 1 !important;
    transform: translateX(-50%) scale(1) !important;
  }
}

/* Icon button shrink animation */
@keyframes iconButtonShrink {
  from {
    opacity: 1 !important;
    transform: translateX(-50%) scale(1) !important;
  }
  to {
    opacity: 0 !important;
    transform: translateX(-50%) scale(0) !important;
  }
}

/* Power Button Wrapper */
.powerButtonWrapper {
  position: relative !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Options Button Wrapper */
.optionsButtonWrapper {
  position: relative !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Disable Button Slide In Animation */
.disableButtonSlideIn {
  animation: disableButtonSlideIn 0.25s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;
}

@keyframes disableButtonSlideIn {
  from {
    opacity: 0 !important;
    transform: translateX(8px) scale(0.8) !important;
  }
  to {
    opacity: 1 !important;
    transform: translateX(0) scale(1) !important;
  }
}

/* Disable Button Slide Out Animation */
.disableButtonSlideOut {
  animation: disableButtonSlideOut 0.2s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;
}

@keyframes disableButtonSlideOut {
  from {
    opacity: 1 !important;
    transform: translateX(0) scale(1) !important;
  }
  to {
    opacity: 0 !important;
    transform: translateX(8px) scale(0.8) !important;
  }
}

/* Action Button Options Popover */
.actionButtonOptionsPopover {
  position: absolute !important;
  top: calc(100% + 8px) !important;
  left: 50% !important;
  margin-left: -60px !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 2px !important;
  background: var(--color-white) !important;
  border-radius: 15px !important;
  padding: 4px !important;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.3) !important;
  /* Animation is handled by JavaScript useEmergeAnimation hook */
  z-index: 20 !important;
  width: fit-content !important;
  min-width: 120px !important;
}

.actionButtonOptionsPopover::before {
  content: '' !important;
  position: absolute !important;
  bottom: 100% !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  border: 6px solid transparent !important;
  border-bottom-color: var(--color-white) !important;
}

/* Action Button Option Button */
.actionButtonOption {
  display: flex !important;
  align-items: center !important;
  gap: 6px !important;
  padding: 6px 10px !important;
  background: transparent !important;
  border: none !important;
  border-radius: 10px !important;
  cursor: pointer !important;
  font-size: 12px !important;
  font-weight: 500 !important;
  color: var(--color-primary-light) !important;
  white-space: nowrap !important;
  transition: all 0.15s ease !important;
  text-align: left !important;
  width: 100% !important;
}

.actionButtonOption:hover {
  background: var(--color-primary-very-light) !important;
  color: var(--color-primary) !important;
}

.actionButtonOption:active {
  transform: scale(0.98) !important;
}

.actionButtonOption svg {
  width: 14px !important;
  height: 14px !important;
  color: inherit !important;
  stroke: currentColor !important;
  stroke-width: 2.5 !important;
  fill: none !important;
  flex-shrink: 0 !important;
}

.actionButtonOption span {
  flex: 1 !important;
}

/* Disable Popover */
.disablePopover {
  position: absolute !important;
  top: calc(100% + 8px) !important;
  left: 50% !important;
  margin-left: -60px !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 2px !important;
  background: var(--color-white) !important;
  border-radius: 15px !important;
  padding: 4px !important;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.3) !important;
  /* Animation is handled by JavaScript useEmergeAnimation hook */
  z-index: 20 !important;
  width: fit-content !important;
}

.disablePopover::before {
  content: '' !important;
  position: absolute !important;
  bottom: 100% !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  border: 6px solid transparent !important;
  border-bottom-color: var(--color-white) !important;
}

/* Disable Popover Option Button */
.disablePopoverOption {
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  padding: 8px 12px !important;
  background: transparent !important;
  border: none !important;
  border-radius: 10px !important;
  cursor: pointer !important;
  font-size: 13px !important;
  font-weight: 500 !important;
  color: var(--color-primary-light) !important;
  white-space: nowrap !important;
  transition: all 0.15s ease !important;
  text-align: left !important;
  width: auto !important;
}

.disablePopoverOption:hover {
  background: var(--color-primary-very-light) !important;
  color: var(--color-primary) !important;
}

.disablePopoverOption:active {
  transform: scale(0.98) !important;
}

.disablePopoverOption svg {
  width: 14px !important;
  height: 14px !important;
  color: inherit !important;
  stroke: currentColor !important;
  stroke-width: 2.5 !important;
  fill: none !important;
  flex-shrink: 0 !important;
}

.disablePopoverOption span {
  flex: 1 !important;
}

/* Popover fade in animation (from above) */
@keyframes popoverFadeIn {
  from {
    opacity: 0 !important;
    transform: translateY(4px) !important;
  }
  to {
    opacity: 1 !important;
    transform: translateY(0) !important;
  }
}

/* Popover fade in animation (from below - for dropdown) */
@keyframes popoverFadeInDown {
  from {
    opacity: 0 !important;
    transform: translateY(-4px) !important;
  }
  to {
    opacity: 1 !important;
    transform: translateY(0) !important;
  }
}

/* ============================================
   EMERGE/SHRINK ANIMATIONS
   Generic animations for components that appear 
   from a source element while growing, and 
   disappear back into the source while shrinking.
   ============================================ */

/* Emerge out animation keyframes (fallback for CSS-only usage) */
@keyframes emergeOut {
  from {
    opacity: 0 !important;
    transform: var(--emerge-start-transform, scale(0) translate(0, 0)) !important;
  }
  to {
    opacity: 1 !important;
    transform: var(--emerge-end-transform, scale(1) translate(0, 0)) !important;
  }
}

/* Shrink in animation keyframes (fallback for CSS-only usage) */
@keyframes shrinkIn {
  from {
    opacity: 1 !important;
    transform: var(--shrink-start-transform, scale(1) translate(0, 0)) !important;
  }
  to {
    opacity: 0 !important;
    transform: var(--shrink-end-transform, scale(0) translate(0, 0)) !important;
  }
}

/* Emerge animation class */
.emerge-animation {
  animation: emergeOut var(--emerge-duration, 200ms) var(--emerge-easing, cubic-bezier(0.4, 0, 0.2, 1)) forwards !important;
}

/* Shrink animation class */
.shrink-animation {
  animation: shrinkIn var(--shrink-duration, 200ms) var(--shrink-easing, cubic-bezier(0.4, 0, 0.2, 1)) forwards !important;
}
